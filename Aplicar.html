<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ficha Informativa - Estancia Infantil Papa Chuchi</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script type="text/javascript">
    emailjs.init('gaIZ160xMZzr5skAN'); 
  </script>

  <style>
    body {
      font-family: 'Plus Jakarta Sans', 'Noto Sans', sans-serif;
    }
    /* Estilos para el menú responsive. Por defecto oculto en móvil y visible en pantallas grandes */
    #nav-menu {
      transition: all 0.3s ease-in-out; /* Transición suave para el menú */
    }
  </style>
</head>
<body class="bg-white min-h-screen flex flex-col">
  <header class="border-b border-[#f0f4f2] px-6 py-4 lg:px-10">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4 text-[#111714]">
          <div class="size-4">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M36.7273 44C33.9891 44 31.6043 39.8386 30.3636 33.69C29.123 39.8386 26.7382 44 24 44C21.2618 44 18.877 39.8386 17.6364 33.69C16.3957 39.8386 14.0109 44 11.2727 44C7.25611 44 4 35.0457 4 24C4 12.9543 7.25611 4 11.2727 4C14.0109 4 16.3957 8.16144 17.6364 14.31C18.877 8.16144 21.2618 4 24 4C26.7382 4 29.123 8.16144 30.3636 14.31C31.6043 8.16144 33.9891 4 36.7273 4C40.7439 4 44 12.9543 44 24C44 35.0457 40.7439 44 36.7273 44Z" fill="currentColor"></path>
            </svg>
          </div>
          <h2 class="text-[#111714] text-lg font-bold leading-tight tracking-[-0.015em]">Academy</h2>
        </div>
        <button id="nav-toggle" class="lg:hidden text-[#111714] focus:outline-none">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
      <nav id="nav-menu" class="hidden lg:flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 lg:gap-8 mt-4 lg:mt-0">
        <div class="flex flex-col lg:flex-row lg:items-center gap-6 lg:gap-9">
          <a class="text-[#111714] text-sm font-medium leading-normal" href="index.html">Colegio</a>
          <a class="text-[#111714] text-sm font-medium leading-normal" href="#">Galeria</a>
          <a class="text-[#111714] text-sm font-medium leading-normal" href="#">Sobre nosotros</a>
          <a class="text-[#111714] text-sm font-medium leading-normal" href="Eventos.html">News &amp; Events</a>
        </div>
        <button class="flex min-w-[84px] h-10 px-4 items-center justify-center bg-[#38e07b] text-[#111714] text-sm font-bold rounded-lg">
          <a href="Aplicar-ahora.html"><span class="truncate">Aplica ahora</span></a>
        </button>
      </nav>
    </header>

  <main class="flex-1 w-full max-w-[720px] mx-auto px-6 pb-16 pt-12">
    <section id="inscription-form" aria-label="Ficha Informativa">
      <h2 class="text-4xl font-extrabold text-[#111714] mb-6 text-center">Ficha Informativa de los Niños y Niñas</h2>
      <form id="form" class="bg-white p-8 rounded-xl shadow-md space-y-6" novalidate>
        
        <div>
          <label for="childLastName" class="block text-gray-700 font-semibold mb-2">Apellidos del niño/a <span class="text-red-600">*</span></label>
          <input type="text" id="childLastName" name="childLastName" required placeholder="Apellidos del niño/a" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="childFirstName" class="block text-gray-700 font-semibold mb-2">Nombre del niño/a <span class="text-red-600">*</span></label>
          <input type="text" id="childFirstName" name="childFirstName" required placeholder="Nombre del niño/a" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="birthDate" class="block text-gray-700 font-semibold mb-2">Fecha de nacimiento <span class="text-red-600">*</span></label>
          <input type="date" id="birthDate" name="birthDate" required class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="birthPlace" class="block text-gray-700 font-semibold mb-2">Lugar de nacimiento <span class="text-red-600">*</span></label>
          <input type="text" id="birthPlace" name="birthPlace" required placeholder="Lugar de nacimiento" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="pediatrician" class="block text-gray-700 font-semibold mb-2">Pediatra</label>
          <input type="text" id="pediatrician" name="pediatrician" placeholder="Nombre del pediatra" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div class="flex items-center mb-4">
          <label class="block text-gray-700 font-semibold mr-4">Alérgico/a a:</label>
          <label class="inline-flex items-center">
            <input type="radio" name="allergic" value="yes" class="form-radio text-[#38e07b]" />
            <span class="ml-2">Sí</span>
          </label>
          <label class="inline-flex items-center ml-4">
            <input type="radio" name="allergic" value="no" class="form-radio text-[#38e07b]" />
            <span class="ml-2">No</span>
          </label>
        </div>

        <div>
          <label for="allergyDetails" class="block text-gray-700 font-semibold mb-2">Si la respuesta es sí, especifique</label>
          <input type="text" id="allergyDetails" name="allergyDetails" placeholder="Especificar alergias" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div class="flex items-center mb-4">
          <label class="block text-gray-700 font-semibold mr-4">Sexo:</label>
          <label class="inline-flex items-center">
            <input type="radio" name="gender" value="female" class="form-radio text-[#38e07b]" />
            <span class="ml-2">F</span>
          </label>
          <label class="inline-flex items-center ml-4">
            <input type="radio" name="gender" value="male" class="form-radio text-[#38e07b]" />
            <span class="ml-2">M</span>
          </label>
        </div>

        <div>
          <label for="motherName" class="block text-gray-700 font-semibold mb-2">Nombre de la madre <span class="text-red-600">*</span></label>
          <input type="text" id="motherName" name="motherName" required placeholder="Nombre de la madre" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="motherLastName" class="block text-gray-700 font-semibold mb-2">Apellido de la madre <span class="text-red-600">*</span></label>
          <input type="text" id="motherLastName" name="motherLastName" required placeholder="Apellido de la madre" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="motherID" class="block text-gray-700 font-semibold mb-2">Cédula de la madre <span class="text-red-600">*</span></label>
          <input type="text" id="motherID" name="motherID" required placeholder="Cédula de la madre" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="motherPhone" class="block text-gray-700 font-semibold mb-2">Teléfono de la madre <span class="text-red-600">*</span></label>
          <input type="tel" id="motherPhone" name="motherPhone" required placeholder="Teléfono de la madre" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="fatherName" class="block text-gray-700 font-semibold mb-2">Nombres del padre <span class="text-red-600">*</span></label>
          <input type="text" id="fatherName" name="fatherName" required placeholder="Nombres del padre" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="fatherLastName" class="block text-gray-700 font-semibold mb-2">Apellidos del padre <span class="text-red-600">*</span></label>
          <input type="text" id="fatherLastName" name="fatherLastName" required placeholder="Apellidos del padre" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="fatherID" class="block text-gray-700 font-semibold mb-2">Cédula del padre <span class="text-red-600">*</span></label>
          <input type="text" id="fatherID" name="fatherID" required placeholder="Cédula del padre" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="fatherPhone" class="block text-gray-700 font-semibold mb-2">Teléfono del padre <span class="text-red-600">*</span></label>
          <input type="tel" id="fatherPhone" name="fatherPhone" required placeholder="Teléfono del padre" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="livingWith" class="block text-gray-700 font-semibold mb-2">¿Con quién vive? <span class="text-red-600">*</span></label>
          <input type="text" id="livingWith" name="livingWith" required placeholder="Con quién vive el niño/a" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="emergencyContact" class="block text-gray-700 font-semibold mb-2">En caso de emergencia llamar a: <span class="text-red-600">*</span></label>
          <input type="text" id="emergencyContact" name="emergencyContact" required placeholder="Nombre de contacto de emergencia" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div>
          <label for="otherPhones" class="block text-gray-700 font-semibold mb-2">Otros números de teléfono</label>
          <input type="tel" id="otherPhones" name="otherPhones" placeholder="Otros números de teléfono" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <div class="flex items-center mb-4">
          <label class="block text-gray-700 font-semibold mr-4">Servicios que recibe:</label>
          <label class="inline-flex items-center">
            <input type="checkbox" name="services" value="Cuido" class="form-checkbox text-[#38e07b]" />
            <span class="ml-2">Cuido</span>
          </label>
          <label class="inline-flex items-center ml-4">
            <input type="checkbox" name="services" value="Educación" class="form-checkbox text-[#38e07b]" />
            <span class="ml-2">Educación</span>
          </label>
        </div>

        <div>
          <label for="address" class="block text-gray-700 font-semibold mb-2">Dirección <span class="text-red-600">*</span></label>
          <input type="text" id="address" name="address" required placeholder="Dirección" class="w-full px-4 py-3 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#38e07b] focus:border-transparent" />
        </div>

        <button type="submit" class="w-full bg-[#38e07b] hover:bg-green-600 text-white font-bold py-4 rounded-lg transition-colors focus:outline-none focus:ring-4 focus:ring-green-300">
          Enviar Ficha Informativa
        </button>

        <p id="form-response" class="text-center text-green-600 font-semibold hidden mt-4"></p>
      </form>
    </section>
  </main>

<script>
  // Consolidar todo el JavaScript relacionado con el envío del formulario aquí
  const form = document.getElementById('form');
  const submitButton = form.querySelector('button[type="submit"]');
  const responseMessage = document.getElementById('form-response');

  form.addEventListener('submit', async function (event) {
    event.preventDefault();

    submitButton.innerText = 'Enviando...';
    submitButton.disabled = true;
    responseMessage.classList.add('hidden'); // Ocultar mensajes anteriores

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    data.services = formData.getAll('services'); // Para múltiples casillas de verificación

    try {
      // 1. Enviar datos a EmailJS
      const emailJSPromise = emailjs.sendForm('default_service', 'template_2q1xbi9', this);

      // 2. Enviar datos a Sheet.best
      const sheetBestPromise = fetch("https://sheet.best/api/sheets/e5698a50-c77c-47ee-895a-eeb9c29c7a17", {
        method: "POST",
        mode: "cors",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          "Apellidos del niño(a)": data.childLastName,
          "Nombre del niño(a)": data.childFirstName,
          "Fecha de nacimiento": data.birthDate,
          "Lugar de nacimiento": data.birthPlace,
          "Pediatra": data.pediatrician,
          "Alérgico(a) a": data.allergic,
          "Detalles Alergia": data.allergyDetails,
          "Sexo": data.gender,
          "Nombre de la madre": data.motherName,
          "Apellido de la madre": data.motherLastName,
          "Cédula de la madre": data.motherID,
          "Teléfono de la madre": data.motherPhone,
          "Nombres del padre": data.fatherName,
          "Apellidos del padre": data.fatherLastName,
          "Cédula del padre": data.fatherID,
          "Teléfono del padre": data.fatherPhone,
          "Con quién vive": data.livingWith,
          "Contacto de emergencia": data.emergencyContact,
          "Otros números de teléfono": data.otherPhones,
          "Servicios que recibe": data.services.join(", "),
          "Dirección": data.address
        })
      });

      // Esperar a que ambas promesas se resuelvan
      await Promise.all([emailJSPromise, sheetBestPromise]);

      responseMessage.classList.remove('hidden');
      responseMessage.classList.remove('text-red-600'); 
      responseMessage.classList.add('text-green-600');
      responseMessage.textContent = '¡Formulario enviado correctamente!';
      form.reset(); 

    } catch (error) {
      console.error('Error al enviar el formulario:', error);
      responseMessage.classList.remove('hidden');
      responseMessage.classList.remove('text-green-600'); 
      responseMessage.classList.add('text-red-600');
      responseMessage.textContent = 'Error al enviar el formulario. Intenta nuevamente.';
    } finally {
      submitButton.innerText = 'Enviar Ficha Informativa';
      submitButton.disabled = false;
    }
  });

  // Lógica del botón de navegación responsive
  const navToggle = document.getElementById('nav-toggle');
  const navMenu = document.getElementById('nav-menu');

  navToggle.addEventListener('click', function() {
    // Si el menú está oculto (tiene la clase 'hidden'), lo mostramos añadiendo 'flex' y quitando 'hidden'
    if (navMenu.classList.contains('hidden')) {
      navMenu.classList.remove('hidden');
      navMenu.classList.add('flex');
    } else {
      // Si el menú está visible (tiene la clase 'flex'), lo ocultamos añadiendo 'hidden' y quitando 'flex'
      navMenu.classList.remove('flex');
      navMenu.classList.add('hidden');
    }
  });

</script>

</body>
</html>